# hash_table_module

리눅스 커널. 해시테이블에서 키가 서로 다른 데이터를 넣고자 할 때,

키가 서로 다르더라도 테이블이 작거나, 어떠한 우연으로 인해 테이블의 하나의 엔트리에 값이 뭉치게 되면

해시테이블의 강점인 상수시간 내의 탐색이 불가능하다. N개의 데이터가 하나의 엔트리로 몰리게 되면, 탐색 시간은 O(N)으로 커지는 것이다.

물론, 애초에 해시테이블을 크게 잡았거나, 운이 좋다면야 피할 수 있는 문제이지만.

데이터가 뭉치더라도 어느정도의 속도를 보장할 방법이 없을까?

처음에는 먼저 rbtree를 이용해서 key가 다르지만 같은 칸으로 응집되는 경우에 대비하고, 키도 같은 경우에만 링크드 리스트를 쓰게 하고 싶었다.

즉, 각 테이블 엔트리가 트리의 최상단 노드가 되고, 트리의 각 노드마다 링크드리스트가 연결이 되어 있는 형태로.

하지만, 아쉽지만 이는 부족한 경험으로 인해 삽질만을 불러일으켰고, 링크드리스트를 포기해야 했다.

현재의 구성에서 이미 동일한 키값이 주어져 있는 데이터는 무시된다. 암호화 프로토콜 등을 이용해 키의 분포를 넓게 퍼뜨리는 것도 방법이 될 수 있을 것이다.

# 헤더의 구조와 구현 범위

 ## hashtable_noduplicate.h
 
 linux/hashtable.h를 수정해서 만든 헤더파일이다.
 

# 테스트용 코드

hashtable.c는 기존 리눅스 커널의 hashtable구조를 이용한다.

hashtable_noduplicate.c는 해당 코드를 수정해서 만든 hash rbtree를 테스트한다.

둘의 구조가 거의 비슷하게끔 설계했지만, 동일하지는 않다. 

# 빌드 방법

리눅스 커널 환경에서 테스트했다. 해당 빌드 에센셜이 없다면 설치해야 한다.

Makefile는 기본적으로 hashtable_noduplicate.ko를 생성한다.

생성 후에는 sudo insmod hashtable_noduplicate.ko로 테스트해볼 수 있다.
